/*******************************************************************************
*  LCD1 - ????????????????????????????             *
*         (??????????  ??????  ????????)               *
*                                                                              *
*  ??:?????????????????????????????             *
*                                                                              *
* ============================================================================ *
*  VERSION DATE        BY                    CHANGE/COMMENT                    *
* ---------------------------------------------------------------------------- *
*  1.00    2013-07-25  ?????(????)  Create                            *
*  2.00    2015-03-04  ?????(????)  ??????? & XC8(V1.32)??? *
* ============================================================================ *
*  PIC 12F1822                                                                 *
*  MPLAB X(v2.15)                                                              *
*  MPLAB(R) XC8 C Compiler Version 1.32                                        *
*******************************************************************************/
#include <xc.h>
#include "skI2Clib.h"
#include "skI2CLCDlib.h"

// ???????????????
#pragma config FOSC     = INTOSC   // ??????????(INTOSC)
#pragma config WDTE     = OFF      // ???????????????(OFF)
#pragma config PWRTE    = ON       // ??ON??64ms??????????????(ON)
#pragma config MCLRE    = OFF      // ??????????????????????(RA3)??????(OFF)
#pragma config CP       = OFF      // ?????????????????(OFF)
#pragma config CPD      = OFF      // ??????????????(OFF)
#pragma config BOREN    = ON       // ????????????ON(ON)
#pragma config CLKOUTEN = OFF      // CLKOUT????RA4????????(OFF)
#pragma config IESO     = OFF      // ????????????????????(OFF)
#pragma config FCMEN    = OFF      // ???????????(OFF)

// ???????????????
#pragma config WRT    = OFF        // Flash??????????(OFF)
#pragma config PLLEN  = OFF        // ???????32MHz????????(OFF)
#pragma config STVREN = ON         // ?????????????????????????????(ON)
#pragma config BORV   = HI         // ????????????(2.5V)??(HI)
#pragma config LVP    = OFF        // ?????????????????(OFF)

/*******************************************************************************
*  InterFunction()   ???????                                            *
*******************************************************************************/
void interrupt InterFunction( void )
{
     // ????????????
     InterI2C() ;
}
/*******************************************************************************
*  ??????                                                                *
*******************************************************************************/
void main()
{
     OSCCON     = 0b01110010 ;   // ???????8??????
     OPTION_REG = 0b00000000 ;   // ????I/O???????????????
     ANSELA     = 0b00000000 ;   // ??????????????????I/O??????
     TRISA      = 0b00000110 ;   // ???RA1(SCL)/RA2(SDA)????(RA3?????)
     WPUA       = 0b00000000 ;   // RA1/RA2???????????????
     PORTA      = 0b00000000 ;   // ????????(??LOW???)

     RA4 = 0;
     __delay_ms(500);
     RA4 = 1;
     __delay_ms(500);

     int i = 0;
     // ?????????(????100KHz)
     InitI2C_Master(1) ;

     // ??????????????
     // ICON OFF,??????(0-63),VDD=3.3V???,LCD?8???
     LCD_Init(LCD_NOT_ICON,32,LCD_VDD3V,8) ;

     while(1)
     {
         if(RA4 == 0)
             i++;
         LCD_SetCursor(0,0) ;        // ?????????
         LCD_Puts("-JP7FKF-") ;
         LCD_SetCursor(0,1) ;        // ?????????
         LCD_Putc(i+0x30) ;
     }
}
